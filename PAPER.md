# 毕业论文

## 摘要

随着互联网技术和产业的迅速发展，接入互联网的服务器和网页数量也呈指数级上升。用户面临着海量的信息，传统的搜索算法只能呈现给用户相同的排序结果，无法针对不同用户的兴趣爱好提供相应的服务。为了解决信息过载问题，推荐系统应运而生。现如今，推荐系统已广泛地应用到互联网各个方面，大大方便了用户的使用，帮助用户快速做出决策，提升效率，也改善用户的体验。

本文采用基于内容的推荐和基于物品的协同过滤推荐，实现一个可解释性电影推荐系统，在为用户推荐电影的同时，采用模板的方式生成解释呈现给用户。系统分为 App 端以及服务器端，App 使用 Google 最新的 Flutter 框架进行搭建，兼容 Android 和 iOS 两端。服务器使用 Django 框架搭建，通过配置 xadmin 模型生成增强的管理系统后台，并使用 crontab 生成系统定时任务进行定时推荐。

整个系统实现了用户登录注册、查看最新电影列表、电影 top 榜单、电影详情、推荐列表和其推荐解释等功能，强化用户对推荐系统的依赖度和信任度，达到设计本系统的目的。

**关键词**: 推荐系统，推荐解释，Flutter 框架，定时任务

## Abstract

With the rapid development of Internet technology and industry, the number of servers and web pages have also increased exponentially. Users are faced with a huge amount of information, the traditional search algorithm can only present the same sorting result to users, but can't provide corresponding service based different users' interests. In order to solve the problem of information overload, the recommendation system came into being. Nowadays, the recommendation system has been widely applied to many aspects of the Internet, which greatly help users make decision quickly, but also improve the experience.

In this paper, the writer implement an explainable movie recommendation system, which adopts content-based recommendation and item-based collaborative filtering recommendation. When recommending a movie for a user, the template is used to generate an explanation and present it to the user. The system is divided into an app and a server. The app is built with Flutter framework and is compatible with both Android and iOS. The server is built with Django framework, which generates an enhanced management system backend by configuring the xadmin,  and the system timing task is generated by crontab for timing recommendation.

The whole system implement the functions of user login and registration, viewing the latest movie list, movie top list, movie details, recommendation list and its recommendation explanation. The system strengthen the user's dependence and trust on the recommendation system, which achieve the purpose of designing this system.

**Keywords**: Recommendation System, Explainable Recommendation, Flutter Framework, Scheduled Task



## 1 绪论

### 1.1 可解释推荐系统的现状与发展

可解释推荐系统是根据用户的历史行为、社交网络、兴趣点、所处上下文环境等信息去判断用户当前需要或感兴趣的物品/服务，通过使用特定的算法，生成推荐解释以及推荐结果，一并推送给用户。近年来，现实的推荐系统已经开始采用大量可解释的推荐方法，尤其是基于模型的可解释推荐算法。可解释推荐的研究和应用也跨越了许多不同的场景，例如可解释的电子商务推荐，可解释的社交推荐，可解释的多媒体推荐等，甚至在医疗、学术等领域，也逐渐开始应用。

#### 1.1.1 国外发展现状

国外最早应用推荐解释的是 Amazon 电子商务平台，据美国著名的科技博客网站 VentureBeat 统计，亚马逊推荐系统为亚马逊贡献了 35% 的销售额。Amazon 采用基于项目的协同过滤推荐算法，能有效地适应电子商务系统庞大的用户数据集和商品数据集，并产生相对快速、高质量及个性化的推荐结果。另外，通过分析用户的购买、浏览、购物车记录，以及潜在的用品需求，给出类似于“The lens is recommended to
you, because you bought a camera before.”的解释。在社交网络方面，Facebook、Twitter等社交网站在进行好友推荐时，通过分析共同好友及其 POI（Point of Interest），在推荐时给出类似于“You both know xxx”或者“xxx and 56 other also like this”的解释。在视听网站中，推荐功能做的较为出色的有Netflix、YouTube以及Spotify。Netflix 采用的是一种评分机制，积累海量的用户喜好资源库，并且具有 top N、genre 等众多的推荐形式。YouTube 和 Spotify 采用的是深度学习算法，使用卷积神经网络（CNN）做基于视频或者音频的推荐，主要根据用户的观看记录，在推荐时给出类似于“You viewed/listened xxx”的推荐解释。

#### 1.1.2 国内发展现状

虽然国内在可解释推荐系统起步较晚，但随着近年来中国互联网的快速发展，国内也出现了很多的优秀的使用可解释推荐系统的网站，比较著名的有豆瓣电影、网易云音乐以及以淘宝为代表的一些电商平台。豆瓣使用的是专家推荐，因为专家给电影评分矩阵的稀疏性更小，也更可靠和稳定，受热门因素的影响较小。推荐解释方面，豆瓣在每部具体影片的界面会显示“喜欢这部电影的人也喜欢…”。网易云音乐作为音乐推荐行业的翘楚，它的核心竞争力在于个性推荐算法，网易云的个性化推荐主要有两个来源，一个是根据编辑推荐，另一个是根据用户收藏以及听歌记录产生的个性化推荐，包括私人FM和每日推荐歌曲。在推荐解释方面，网易云会生成类似于“根据你喜欢的单曲《xxx》推荐”或者“编辑推荐：xxx”等解释。在以淘宝为代表的电商平台中，淘宝平台主要根据用户的浏览以及购买记录，使用协同过滤的方式进行商品的推荐。在推荐形式上，分为主页直接推荐商品，以及在购买完某件商品后推荐相关商品，并显示“猜你喜欢，你购买商品与下面的商品类似”的解释。

### 1.2 可解释推荐系统的研究目的

现有的推荐系统普遍缺乏解释机制，在不了解推荐系统的人看来，推荐体系就是一个“黑盒子”，用户不理解推荐机制，而输出的推荐结果没有其他解释信息，这将直接导致用户对推荐系统结果的不信任，合理的解释能够让推荐更加透明以及可信。例如，在电影推荐的场景中，用户对系统推荐给自己的文艺片感到疑惑，而用户对此并不感兴趣。透明的推荐系统则会对此推荐做出合理的推荐说明，解释因为这是最近流行的电影，该解释信息被用于向用户推荐文艺电影， 由此用户便可以明晰推荐产生的过程，并有了更改错误推荐的机会[^1]。

### 1.3 可解释推荐系统的研究意义

随着互联网信息的快速发展，如今已经进入了一个数据爆炸的时代，用户想要在海量的数据中找到需要的信息变得越来越难。在此情形下，搜索引擎应运而生。搜索引擎收集互联网中各个网站的信息来建立数据库，通过关键字检索并按照一定的排列顺序返回结果，它可以使用少量信息迅速定位高质量的信息资源。但搜索系统存在一个很明显的弊端，即无法针对不同用户的兴趣爱好提供相应的服务，推荐系统的出现很好的解决了这一问题。推荐系统根据不同的推荐机制可能用到数据源中的一部分，然后根据这些数据，分析出一定的规则或者直接对用户喜好进行预测计算。

如今，推荐引擎已经在电子商务和社交应用上都取得很大的成功。这也进一步的说明，在面对海量的数据，用户需要这种更加智能的，更加了解他们需求、口味和喜好的信息发现机制。为了使得推荐内容更容易被用户所接受，在给用户推荐的同时，加上相应的解释。通过告诉用户推荐的原因，以及推荐结果和日常行为之间的关系，用户便可知道如何反馈行为给推荐系统，同时也将降低用户对奇怪推荐的不满程度。因此，为提高用户对系统的信任和接受程度、用户选择体验推荐产品的概率以及用户满意程度，系统的可解释推荐是至关重要的。

### 1.4 论文主要工作

本题旨在实现一个可解释的推荐系统，选取电影作为推荐目标，使用豆瓣的开源数据集以及API，制作一个移动端的电影推荐 App。App 使用 Flutter 框架进行搭建，兼容 Android 和 iOS 两端，能够查看最新电影列表、电影 top 榜单、电影详情、演员详情等。服务器使用 Django框架搭建，并生成系统定时任务进行定时推荐。针对电影推荐方面，使用基于内容和基于项目的协同过滤推荐，对用户进行不同的电影推荐的同时，生成相应的推荐解释，提高用户决策速度和系统推荐准确度，并强化用户对推荐系统的依赖度和信任度。

### 1.5 论文的组织结构

本文主要是对可解释推荐系统的设计与实现进行描述，一共分为6个章节。具体章节安排如下：

第一章，绪论。本部分主要描述可解释推荐系统的现状与发展、研究目的和研究意义。

第二章，系统分析。本部分主要对系统的功能需求和可行性进行分析。

第三章，系统概要设计。本部分主要对系统的总体架构，主要流程以及数据库的设计进行分析和讲解。

第四章，系统的详细设计与实现。本部分主要是重点讲解系统各部分的算法设计以及核心代码的展示。

第五章，系统运行与效果分析。本部分主要展示各模块的运行效果，并配有相关文字进行介绍。

第六章，总结与展望。本部分主要是介绍本系统的不足之处，以及优化的解决方案。



### 1.6 本章小结

本章主要是讲述了可解释推荐系统在当今时代的一个发展现状，并叙述本课题的研究意义，目的以及主要的工作，在最后阐述了本论文的总体结构。



## 2 系统分析

可解释推荐系统建立于推荐系统基础之上，推荐系统的基本功能都应该包含在内。本课题将用户分为游客和登录用户两种，针对游客，首页显示的是默认的推荐列表、最近上映的电影列表以及电影榜单等，用户可单击电影封面查看电影的详细内容，例如电影标签、简介、预告片、海报以及评论等内容。对于登陆用户，主界面则会根据用户的配置信息生成推荐列表，针对每个推荐的电影，都会给出基于模板的解释，帮助用户更好的了解推荐理由，增加用户的信服度。

### 2.1 可行性分析

本部分主要是针对可解释电影推荐系统在可行性方面进行一些说明，并得出相应的结论。



#### 2.1.1 技术可行性

本系统属于全栈式开发。系统分为 App 端以及服务器端，App 使用 Google 最新的 Flutter 框架进行搭建，兼容 Android 和 iOS 两端。服务器使用 Django 框架搭建，通过配置 xadmin 模型生成增强的管理系统后台，并使用 crontab 生成系统定时任务进行定时推荐。本系统在 Mac OS 下使用 VSCode 和 PyCharm 工具进行开发，经精密分析，本系统结构清晰，便于管理维护，技术可行。


#### 2.1.2 经济可行性

本系统对软硬件环境要求不高，开发周期适中，系统稳定性良好且易于维护管理，经济可行。

#### 2.1.3 操作可行性

本系统界面设计风格和市场上大多数电影应用类似，界面设计友好，功能齐全，系统同时兼容 Android 和 iOS端，用户易于操作。

### 2.2 需求分析

经过一段时间的市场调研，针对重要的信息进行收集并分析，确定了本系统的功能和性能上的需求。

#### 2.2.1 任务需求

本课题所需要实现的是一个基于 Flutter 的可解释电影推荐系统，其主要目的是提高用户决策速度和系统推荐准确度，并强化用户对推荐系统的依赖度和信任度。故本课题需要通过搭建一个电影推荐应用，实现基础电影信息流展示服务的同时，分析用户数据，对数据进行挖掘分析，并进行可解释的电影推荐，提高用户对系统的信任、接受程度以及满意程度。

#### 2.2.2 功能需求

（1）用户登录模块
本系统用户分为游客，会员和管理员三个角色，游客访问app显示的是默认的推荐列表，会员通过账号密码进行登录，会根据用户的配置信息给出专门的推荐列表。管理员可在后台对电影信息进行管理，以及对观众的信息进行统计。

（2）用户信息注册模块
游客可以选择注册为会员，通过填入相关的基本信息进行注册。密码使用SHA256进行加密，注册完后的信息将传入后端并保存在MySQL数据库中。

（3）电影推荐模块
电影推荐模块是本系统最为核心的一个模块。针对游客，首页显示的是默认的推荐列表，用户可以通过单击电影封面查看电影的详细内容。会员用户使用账号密码登陆，主界面则会根据用户的配置信息给出专门的推荐列表，其中针对每个推荐项目，给出相应的解释，帮助用户更好的了解推荐理由。

（4）电影收藏模块
当用户点击进入电影详细信息界面时，可以对电影进行收藏。收藏数据作为推荐系统学习模型的数据源，通过计算找到与收藏电影相关的电影，并以列表的形式推荐给用户。

（5）演员收藏模块
当用户点击演员头像进入详细信息界面时，可以对演员进行收藏。通过查询演员相关作品，可作为推荐数据。

（6）电影类型收藏模块
当用户注册完成时，让用户选择喜欢的电影类型，通过查询类型相关电影，作为推荐数据，解决推荐系统冷启动的问题。

（7）电影信息模块
原始数据集中给的初始数据非常简单和抽象，有 280 万条用户对电影的评分数据。这里通过 python 爬虫对数据进行扩充，从豆瓣网站中获取到电影的海报、类型、导演、演员等基本信息，添加进数据集，方便了内容展示。

（8）电影搜索模块
电影支持模糊搜索，可以根据电影类型、导演、演员等信息进行组合搜索。

### 2.3 个性化推荐算法分析

#### 2.3.1 个性化推荐系统概述

从推荐系统的结构层次来说，推荐系统有3个重要的模块：用户建模模块、推荐对象建模模块、推荐算法模块[^2]。

### 2.4 技术分析

本部分针对系统用到的关键技术进行分析并讲解其特点。

#### 2.4.1 Redux 状态管理

（1）Redux 概述

随着 JavaScript 单页应用开发日趋复杂，JavaScript 需要管理比任何时候都要多的 state （状态）。 这些 state 可能包括服务器响应、缓存数据、本地生成尚未持久化到服务器的数据，也包括 UI 状态，如激活的路由，被选中的标签，是否显示加载动效或者分页器等等。

Redux 是一种具有单向数据流的体系结构，用于对 React 应用进行状态管理，在 Flutter 中同样适用。在 Redux 中，所有的状态都储存在 Store 里，这个 Store 会放在 App 顶层。每个应用程序事件（来自用户或外部）都表示为一个 Action，它被分派到 Reducer 函数。Reducer 根据收到的操作更新 Store 的状态。每当状态更新时，都会重新创建视图以反映更改。

（2）Redux 工作流程图

Redux 工作流程图如下图所示，从图中可以看出：Redux 不能通过 View 直接操作数据，而是发起 Action 告知 Reducer 状态发生改变。Reducer 接收到了 Action，生成新的状态存放到 Store 中。当存储状态改变时，对应的视图也相应更新，这样便能够同步不同 view 中的状态。

![](https://raw.githubusercontent.com/Mayandev/mayandev_blog_image/master/blog/redux-architecture-overview.png)

#### 2.4.2 RESTful API

（1） RESTful API 概述

RESTful API 也称为 RESTful Web 服务，是基于代表性状态转移技术的一种架构风格，也是目前最流行的一种互联网软件架构。它结构清晰、符合标准、易于理解、扩展方便，所以得到越来越多网站的采用。RESTful API 强调 HTTP 以资源为中心，并且规范资源 URI 的风格，规范 HTTP 请求动作（PUT，POST 等）的使用，并使其具有对应的语义[^6]。

RESTful 的优点有：URL 具有很强可读性的，具有自描述性；资源描述与视图的松耦合；可提供 OpenAPI，便于第三方系统集成，提高互操作性；如果提供无状态的服务接口，可提高应用的水平扩展性；

（2）RESTful API 构架图

![](https://raw.githubusercontent.com/Mayandev/mayandev_blog_image/master/blog/rest-api-architecture.png)



### 2.5 框架分析

本部分主要针对系统用到的框架进行分析并讲解其特点。

#### 2.5.1 Flutter

（1）Flutter 概述

Flutter 是 Google 推出并开源的移动应用开发框架，主打跨平台、高保真、高性能。开发者可以通过 Dart 语言开发 App，一套代码同时运行在 iOS、Android、Web、Desktop 等平台。 Flutter 提供了丰富的组件、接口，使用 Native 引擎渲染视图，能为用户提供良好的体验。

（2）Flutter 框架结构图

![](https://raw.githubusercontent.com/Mayandev/mayandev_blog_image/master/blog/flutter-framework.png)

（3）Flutter 核心模块分析

① Flutter Framework

这是一个纯 Dart 实现的 SDK，底层是 UI 库，提供动画、手势及绘制能力。Rendering 层构建和更新 UI 树，将 UI 绘制到屏幕。Widgets 层是 Flutter 提供一套基础组件库，含有 Material 和 Cupertino 两种风格的组件。

② Flutter Engine

这是一个纯 C++ 实现的 SDK，其中包括了 Skia 引擎、Dart 运行时、文字排版引擎等。在代码调用 UI 库时，调用最终会走到 Engine 层，然后实现真正的绘制逻辑。

#### 2.5.2 Django

（1）Django 概述

Django 是一个高级的 Python 网络框架，拥有完善的模板机制、对象关系映射机制以及用于动态创建后台管理界面的功能，可以快速设计和开发具有 MVC 层次的 Web 应用。在实体映射方面，Django 的对象相关映射机制帮助开发者在 Python 类中灵活定义数据模型，并且具有功能丰富的动态数据库访问 API，可以大幅度简化书写 SQL 语句的繁杂工作，同时支持包括 Postgresql，MySql，Sqlite，Oracle 在内的多种后台数据库。通过使用内置模板，可以将模型层、控制层与页面模板完全独立开来进行编码。

（2）Django 请求流程图

![](https://raw.githubusercontent.com/Mayandev/mayandev_blog_image/master/blog/basic-django.png)

（3）Django 模块分析

① URLs 模块

URL 映射器用于根据请求 URL 将 HTTP 请求重定向到相应的视图。URL 映射器还可以匹配出现在 URL 中的字符串或数字的特定模式，并将其作为数据传递给视图。

② View 模块

视图是一个请求处理函数，它接收 HTTP 请求并返回 HTTP 响应。视图通过模型访问满足请求所需的数据，并将响应的格式委托给模板。

③ Models 模块

模型是定义应用程序数据结构的 Python 对象，并提供在数据库中管理（添加，修改，删除）和查询记录的机制。

④ Template 模块

模板 是定义文件（例如 HTML 页面）的结构或布局的文本文件，用于表示实际内容的占位符。一个视图可以使用 HTML 模板，从数据填充它动态地创建一个 HTML 页面模型。






### 2.6 本章小结

本章主要在可行性分析和需求分析两大方面对系统展开叙述，介绍个性化推荐系统相关算法以及本系统运用的核心技术，最后对 Flutter 和 Django 框架进行讲解。



[^1]: 王春才, 邢晖, 李英韬.推荐系统的推荐解释研究[J].现代计算机(专业版),2016(02):41-43+80.

[^2]: 个性化推荐系统综述 王国霞，刘贺平

[^3]: Django 网站

[^4]: Flutter 官网

[^5]: Redux 官网

[^6]: Andry F, Wan L, Nicholson D. A mobile application accessing patientshealth records through a rest api[C]//HEALTHINF 2011 INTERNATIONAL CONFERENCE ON HEALTH INFORMATICS. 2011: 27-32.